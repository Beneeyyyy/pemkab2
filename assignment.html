<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assignment Dinas - PemKab Sleman</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/assignment.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" href="assets/logo.jpg" />
  </head>
  <body>
    <!-- Sidebar -->
    <aside>
      <nav class="sidebar">
        <div class="nav-header">
          <div class="logo">
            <img src="assets/logo.jpg" alt="Pemkab Sleman Logo" />
            <div>
              <h2>Pemkab Sleman</h2>
              <span>Command Center</span>
            </div>
          </div>
        </div>
        
        <div class="nav-items">
          <div class="nav-item" onclick="window.location.href='dashboard.html'">
            <i class="fa-solid fa-chart-line"></i>
            <span>Dashboard</span>
          </div>
          
          <div class="nav-item" onclick="window.location.href='dashboard.html#warning'">
            <i class="fa-solid fa-exclamation-triangle"></i>
            <span>Early Warning</span>
          </div>
          
          <div class="nav-item" onclick="window.location.href='dashboard.html#issues'">
            <i class="fa-solid fa-exclamation-circle"></i>
            <span>Manajemen Isu</span>
          </div>
          
          <div class="nav-item" onclick="window.location.href='dashboard.html#optimizer'">
            <i class="fa-solid fa-robot"></i>
            <span>Public Comm. AI</span>
          </div>
          
          <div class="nav-item" onclick="window.location.href='dashboard.html#accounts'">
            <i class="fa-brands fa-tiktok"></i>
            <span>KOL Watchlist</span>
          </div>
          
          <div class="nav-item" onclick="window.location.href='dashboard.html#reports'">
            <i class="fa-solid fa-file-pdf"></i>
            <span>Executive Reports</span>
          </div>
          
          <div class="nav-item active" onclick="window.location.href='assignment.html'">
            <i class="fa-solid fa-user-tie"></i>
            <span>Assignment Dinas</span>
          </div>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main>
      <header>
        <div class="date-display" id="current-date">Loading...</div>
        
        <div class="ticker-wrap">
          <div class="ticker">
            <span> CRITICAL: Antrian RSUD Sleman viral di TikTok •  UPDATE: 15 isu aktif sedang dipantau •  TARGET: Response time < 30 menit •  TREND: Sentiment negatif meningkat 12%</span>
          </div>
        </div>

        <div class="user-profile">
          <div class="avatar">AD</div>
          <span>Admin Dinas</span>
        </div>
      </header>

      <!-- Content Area -->
      <div class="content-area">
        <!-- Assignment & Koordinasi Dinas Section -->
        <section id="assignment" class="view-section active">
          <!-- Header -->
          <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="font-size: 2.5rem; color: #1e40af; margin-bottom: 10px;">
              �️ Assignment & Koordinasi Dinas
            </h1>
            <p style="font-size: 1.1rem; color: #64748b; margin-bottom: 20px;">
              Pengelolaan assignment isu ke dinas penanggung jawab
            </p>
          </div>
          
          <!-- Overview Statistics -->
          <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 30px;">
            <div class="stat-card" style="border-top: 4px solid #3b82f6;">
              <div class="stat-label">Total Dinas</div>
              <div class="stat-value">5</div>
              <div class="stat-trend text-muted">Semua Dinas Aktif</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #f59e0b;">
              <div class="stat-label">Perlu Assignment</div>
              <div class="stat-value">2</div>
              <div class="stat-trend text-warning">Menunggu Penugasan</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #10b981;">
              <div class="stat-label">Sedang Dikerjakan</div>
              <div class="stat-value">2</div>
              <div class="stat-trend text-success">Sedang Proses</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #6366f1;">
              <div class="stat-label">Avg Response Time</div>
              <div class="stat-value">4.5h</div>
              <div class="stat-trend text-muted">Rata-rata Response</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #8b5cf6;">
              <div class="stat-label">Avg Jam Penyelesaian</div>
              <div class="stat-value">6.2h</div>
              <div class="stat-trend text-muted">Rata-rata Selesai</div>
            </div>
          </div>
          
          <!-- Dinas Performance Grid -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px;">
            <!-- PUPR Card -->
            <div class="dinas-performance-card">
              <div class="dinas-header">
                <div class="dinas-info">
                  <h3 style="color: #1a1a1a; margin: 0; font-size: 1.2rem;">
                    <i class="fa-solid fa-building" style="color: #3b82f6;"></i> PUPR
                  </h3>
                  <p style="color: #64748b; margin: 5px 0; font-size: 0.9rem;">
                    Dinas Pekerjaan Umum dan Perumahan Rakyat
                  </p>
                </div>
               
              </div>
              
              <div class="dinas-stats-grid">
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">35</div>
                  <div class="dinas-stat-label">Isu Total</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">7</div>
                  <div class="dinas-stat-label">Aktif</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">4.5h</div>
                  <div class="dinas-stat-label">Response Time</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">28</div>
                  <div class="dinas-stat-label">Resolved</div>
                </div>
              </div>
              
              <div class="dinas-metrics">
                <div class="metric-row">
                  <span class="metric-label">Engagement:</span>
                  <span class="metric-value">8.4K</span>
                </div>
                <div class="metric-row">
                  <span class="metric-label">Posting:</span>
                  <span class="metric-value">85%</span>
                </div>
                <div class="metric-row">
                  <span class="metric-label">Completion:</span>
                  <span class="metric-value">80%</span>
                </div>
                <div class="completion-bar">
                  <div class="completion-label">Completion Rate</div>
                  <div class="completion-progress">
                    <div class="completion-fill" style="width: 80%;"></div>
                  </div>
                  <div class="completion-text">28 / 35</div>
                </div>
              </div>
              
              <!-- Kategori Tanggungan -->
              <div class="kategori-section">
                <h4 style="color: #1a1a1a; margin-bottom: 15px;">
                  <i class="fa-solid fa-tags"></i> Kategori Tanggungan:
                </h4>
                <div class="kategori-list">
                  <div class="kategori-item">
                    <i class="fa-solid fa-road"></i>
                    <span>Infrastruktur Jalan</span>
                  </div>
                  <div class="kategori-item">
                    <i class="fa-solid fa-bridge"></i>
                    <span>Jembatan</span>
                  </div>
                  <div class="kategori-item">
                    <i class="fa-solid fa-water"></i>
                    <span>Drainase</span>
                  </div>
                </div>
              </div>
              
              <div class="dinas-actions">
            
                <button class="btn-generate" style="background: #6b7280;" onclick="viewDetails('PUPR')">
                  <i class="fa-solid fa-chart-line"></i> Lihat Detail
                </button>
              </div>
            </div>
            
            <!-- Dishub Card -->
            <div class="dinas-performance-card">
              <div class="dinas-header">
                <div class="dinas-info">
                  <h3 style="color: #1a1a1a; margin: 0; font-size: 1.2rem;">
                    <i class="fa-solid fa-truck" style="color: #f59e0b;"></i> Dishub
                  </h3>
                  <p style="color: #64748b; margin: 5px 0; font-size: 0.9rem;">
                    Dinas Perhubungan
                  </p>
                </div>
              
              </div>
              
              <div class="dinas-stats-grid">
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">22</div>
                  <div class="dinas-stat-label">Isu Total</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">7</div>
                  <div class="dinas-stat-label">Aktif</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">6.2h</div>
                  <div class="dinas-stat-label">Response Time</div>
                </div>
                <div class="dinas-stat-item">
                  <div class="dinas-stat-number">15</div>
                  <div class="dinas-stat-label">Resolved</div>
                </div>
              </div>
              
              <div class="dinas-metrics">
                <div class="metric-row">
                  <span class="metric-label">Engagement:</span>
                  <span class="metric-value">5.2K</span>
                </div>
                <div class="metric-row">
                  <span class="metric-label">Posting:</span>
                  <span class="metric-value">72%</span>
                </div>
                <div class="metric-row">
                  <span class="metric-label">Completion:</span>
                  <span class="metric-value">68%</span>
                </div>
                <div class="completion-bar">
                  <div class="completion-label">Completion Rate</div>
                  <div class="completion-progress">
                    <div class="completion-fill" style="width: 68%; background: #f59e0b;"></div>
                  </div>
                  <div class="completion-text">15 / 22</div>
                </div>
              </div>
              
              <!-- Kategori Tanggungan -->
              <div class="kategori-section">
                <h4 style="color: #1a1a1a; margin-bottom: 15px;">
                  <i class="fa-solid fa-tags"></i> Kategori Tanggungan:
                </h4>
                <div class="kategori-list">
                  <div class="kategori-item">
                    <i class="fa-solid fa-bolt"></i>
                    <span>Infrastruktur Listrik</span>
                  </div>
                  <div class="kategori-item">
                    <i class="fa-solid fa-traffic-light"></i>
                    <span>Rambu Lalu Lintas</span>
                  </div>
                  <div class="kategori-item">
                    <i class="fa-solid fa-bus"></i>
                    <span>Terminal</span>
                  </div>
                </div>
              </div>
              
              <div class="dinas-actions">
                
                <button class="btn-generate" style="background: #6b7280;" onclick="viewDetails('Dishub')">
                  <i class="fa-solid fa-chart-line"></i> Lihat Detail
                </button>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div style="text-align: center; margin-top: 30px;">
            <button class="btn-generate" style="background: #10b981; margin-right: 10px;" onclick="addNewDinas()">
              <i class="fa-solid fa-plus"></i> Tambah Dinas
            </button>
            <button class="btn-generate" style="background: #6366f1;" onclick="exportReport()">
              <i class="fa-solid fa-download"></i> Export Laporan
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Scripts -->
    <script src="js/modules/assignment-dinas.js"></script>
    <script>
      // Update current date
      function updateCurrentDate() {
        const now = new Date();
        const options = { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        };
        const dateString = now.toLocaleDateString('id-ID', options);
        const dateElement = document.getElementById('current-date');
        if (dateElement) {
          dateElement.textContent = dateString;
        }
      }
      
      // Initialize on DOM load
      document.addEventListener('DOMContentLoaded', function() {
        updateCurrentDate();
        setInterval(updateCurrentDate, 60000); // Update every minute
        
        // Initialize Assignment Dinas
        setTimeout(() => {
          if (typeof initAssignmentDinas === 'function') {
            initAssignmentDinas();
          }
        }, 100);
      });
    </script>
  </body>
</html>
